<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .star-wrapper{
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .all-stars{
            display: flex;
            padding: 15px;
        }

        .star{
            width: 50px;
            height: 50px;
            font-size: 25px;
            padding: 5px;
        }

        .fa-solid{
            color: gold;
        }

        .rating{
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="star-wrapper">
        <h1>Start component</h1>
        <div class="all-stars">
            <div class="star"><i class="fa-regular fa-star" data-id="1"></i></div>
            <div class="star"><i class="fa-regular fa-star" data-id="2"></i></div>
            <div class="star"><i class="fa-regular fa-star" data-id="3"></i></div>
            <div class="star"><i class="fa-regular fa-star" data-id="4"></i></div>
            <div class="star"><i class="fa-regular fa-star" data-id="5"></i></div>
        </div>
        <div class="rating">Ratings count => <span>0</span></div>
    </div> 

    <script>
        let starRating = 0;
        const allStarRef = document.querySelector('.all-stars');
        const result = document.querySelector('span');

        allStarRef.addEventListener('mouseover',function(e){
            const targetVal = e.target;

            if (targetVal.classList.contains('fa-star')){
                changeColor(targetVal.dataset.id);
            }
        })


        allStarRef.addEventListener('mouseleave',function(e){
            const targetVal = e.target;
            changeColor(starRating);
        })        


        allStarRef.addEventListener('click',function(e){
            const targetVal = e.target;

            if (targetVal.classList.contains('fa-star')){
                changeColor(targetVal.dataset.id);
                result.innerText=targetVal.dataset.id;
                starRating=Number(targetVal.dataset.id)
            }
        })

        function changeColor(targetIndex){
            const starIcons = document.querySelectorAll('.star i');
            
            starIcons.forEach((icon, idx) => {
                const currentIdx = idx+1;
                if (currentIdx<=targetIndex){
                    icon.classList.remove('fa-regular');
                    icon.classList.add('fa-solid');

                } else {
                    icon.classList.remove('fa-solid');
                    icon.classList.add('fa-regular');
                }
            })
        }

    </script>
    
</body>
</html>